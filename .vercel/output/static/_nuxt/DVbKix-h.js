import{c as y,_ as k,a as C,b as V}from"./gFKvgYVH.js";import{_ as $,a as T}from"./CTYq_1Fj.js";import{_ as S}from"./DPT98cEI.js";import{_ as N}from"./CIl2gqAq.js";import{e as j,g as E,k as p,n as d,r as _,c as B,a,b as t,w as s,o as L,d as o,J as q,t as A,s as P,K as D}from"#entry";import"./BEHD0UYf.js";const G={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 p-4"},J={class:"max-w-md w-full space-y-8 p-4 md:p-8"},M={class:"space-y-2"},O={class:"space-y-2"},R={class:"mt-6 text-center"},U={class:"text-gray-300"},X=j({__name:"login",setup(z){E(()=>{p("@mmo/ninja/token").value&&d("/home")});const n=_({username:"",password:""}),i=_(!1),{showError:f}=D(),w=async()=>{i.value=!0;try{const r=await $fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n.value)});if(r&&r.success){await P(),await new Promise(e=>setTimeout(e,100));try{const e=p("@mmo/ninja/token"),l=await $fetch("/api/characters",{method:"GET",headers:{Authorization:`Bearer ${e.value}`}});Array.isArray(l?.data)&&l.data.length>0?await d("/selecionar-personagem",{replace:!0}):await d("/criar-personagem",{replace:!0})}catch{await d("/criar-personagem",{replace:!0})}}}catch{f("Dados inválidos. Verifique seu login e senha.")}finally{i.value=!1}};return(r,e)=>{const l=C,h=k,c=$,m=T,x=S,b=N,g=V,v=y;return L(),B("div",G,[a("div",J,[e[7]||(e[7]=a("div",{class:"text-center"},[a("h1",{class:"text-2xl md:text-4xl font-bold text-white mb-2"}," Ninja Space RPG "),a("p",{class:"text-gray-300 text-sm md:text-base"}," Entre em sua conta para continuar sua jornada ")],-1)),t(v,{class:"bg-white/10 backdrop-blur-sm border-white/20"},{default:s(()=>[t(h,null,{default:s(()=>[t(l,{class:"text-white text-center"},{default:s(()=>[...e[2]||(e[2]=[o("Login",-1)])]),_:1})]),_:1}),t(g,null,{default:s(()=>[a("form",{onSubmit:q(w,["prevent"]),class:"space-y-4"},[a("div",M,[t(c,{for:"username",class:"text-white"},{default:s(()=>[...e[3]||(e[3]=[o("Login",-1)])]),_:1}),t(m,{id:"username",modelValue:n.value.username,"onUpdate:modelValue":e[0]||(e[0]=u=>n.value.username=u),type:"text",placeholder:"Seu nome de usuário",required:"",class:"bg-white/20 border-white/30 text-white placeholder:text-gray-300"},null,8,["modelValue"])]),a("div",O,[t(c,{for:"password",class:"text-white"},{default:s(()=>[...e[4]||(e[4]=[o("Senha",-1)])]),_:1}),t(m,{id:"password",modelValue:n.value.password,"onUpdate:modelValue":e[1]||(e[1]=u=>n.value.password=u),type:"password",placeholder:"Sua senha",required:"",class:"bg-white/20 border-white/30 text-white placeholder:text-gray-300"},null,8,["modelValue"])]),t(x,{type:"submit",disabled:i.value,class:"w-full bg-blue-600 hover:bg-blue-700 text-white"},{default:s(()=>[o(A(i.value?"Entrando...":"Entrar"),1)]),_:1},8,["disabled"])],32),a("div",R,[a("p",U,[e[6]||(e[6]=o(" Não tem uma conta? ",-1)),t(b,{to:"/cadastro",class:"text-blue-400 hover:text-blue-300 font-medium"},{default:s(()=>[...e[5]||(e[5]=[o(" Cadastre-se aqui ",-1)])]),_:1})])])]),_:1})]),_:1})])])}}});export{X as default};
