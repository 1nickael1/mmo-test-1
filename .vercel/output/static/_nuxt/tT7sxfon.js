import{i as R}from"./Bn0oCK2q.js";import{r as m,f as u,U as $,e as v,A as h,V as k,H as d,p as w,W as P}from"#entry";import{b as T,S as p}from"./D3nKW_CT.js";function N(t){const i=R({dir:m("ltr")});return u(()=>t?.value||i.dir?.value||"ltr")}function E(){const t=m(),i=u(()=>["#text","#comment"].includes(t.value?.$el.nodeName)?t.value?.$el.nextElementSibling:T(t));return{primitiveElement:t,currentElement:i}}const A="data-reka-collection-item";function _(t={}){const{key:i="",isProvider:C=!1}=t,f=`${i}CollectionProvider`;let e;if(C){const n=m(new Map);e={collectionRef:m(),itemMap:n},P(f,e)}else e=$(f);const M=(n=!1)=>{const o=e.collectionRef.value;if(!o)return[];const r=Array.from(o.querySelectorAll(`[${A}]`)),l=Array.from(e.itemMap.value.values()).sort((s,c)=>r.indexOf(s.ref)-r.indexOf(c.ref));return n?l:l.filter(s=>s.ref.dataset.disabled!=="")},x=v({name:"CollectionSlot",setup(n,{slots:o}){const{primitiveElement:r,currentElement:a}=E();return w(a,()=>{e.collectionRef.value=a.value}),()=>d(p,{ref:r},o)}}),y=v({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(n,{slots:o,attrs:r}){const{primitiveElement:a,currentElement:l}=E();return h(s=>{if(l.value){const c=k(l.value);e.itemMap.value.set(c,{ref:l.value,value:n.value}),s(()=>e.itemMap.value.delete(c))}}),()=>d(p,{...r,[A]:"",ref:a},o)}}),S=u(()=>Array.from(e.itemMap.value.values())),I=u(()=>e.itemMap.value.size);return{getItems:M,reactiveItems:S,itemMapSize:I,CollectionSlot:x,CollectionItem:y}}export{_ as a,N as u};
