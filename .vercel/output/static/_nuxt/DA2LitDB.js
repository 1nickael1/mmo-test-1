import{_ as S}from"./MSWrGCcy.js";import{_ as k}from"./DPT98cEI.js";import{_ as z,a as E,b as I,c as V}from"./gFKvgYVH.js";import{_ as A}from"./BePr-7gU.js";import{u as G}from"./BmWNdDnL.js";import{e as D,r as h,f as b,g as F,c as l,a as s,h as d,i as c,t as o,F as w,j as C,k as m,o as n,l as $,w as i,d as _,m as j,b as x}from"#entry";import"./BEHD0UYf.js";const L={class:"space-y-8"},O={key:0,class:"bg-white dark:bg-gray-800 rounded-lg p-4 md:p-6 shadow"},M={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4"},P={class:"text-lg md:text-xl font-semibold text-black dark:text-white"},R={class:"text-gray-600 dark:text-gray-400 text-sm md:text-base"},H={class:"flex items-center space-x-2"},J={class:"font-semibold text-black dark:text-white text-lg"},K={key:1,class:"text-center py-8"},Q={key:2,class:"space-y-6"},U={class:"flex flex-wrap gap-2"},W={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6"},X={class:"flex items-center justify-between"},Y={key:0,class:"space-y-2"},Z={class:"grid grid-cols-2 gap-2 text-sm"},ee={key:0,class:"flex justify-between"},te={class:"font-medium text-red-600"},se={key:1,class:"flex justify-between"},ae={class:"font-medium text-blue-600"},re={key:2,class:"flex justify-between"},oe={class:"font-medium text-green-600"},ne={key:3,class:"flex justify-between"},le={class:"font-medium text-purple-600"},ce={key:4,class:"flex justify-between"},ie={class:"font-medium text-orange-600"},de={class:"flex items-center justify-between"},ue={class:"flex items-center space-x-2"},fe={class:"font-semibold text-gray-900 dark:text-white"},xe={class:"text-sm text-gray-700 dark:text-gray-300"},ye={key:3,class:"text-center py-12"},we=D({__name:"loja",setup(pe){const a=G(),y=h([]),u=h(!1),p=h("Todos"),f=h(0),N=b(()=>{const r=["Todos"];return y.value.forEach(t=>{r.includes(t.category)||r.push(t.category)}),r}),B=b(()=>p.value==="Todos"?y.value:y.value.filter(r=>r.category===p.value)),q=async()=>{if(a.currentCharacter){u.value=!0;try{const r=m("@mmo/ninja/token"),t=await $fetch("/api/shop/items",{method:"GET",headers:{Authorization:`Bearer ${r.value}`},query:{level:a.currentCharacter.level,class:a.currentCharacter.class}});t.success&&(y.value=t.data||[])}catch{}finally{u.value=!1}}},v=async()=>{if(a.currentCharacter)try{const r=m("@mmo/ninja/token"),t=await $fetch("/api/resources",{method:"GET",headers:{Authorization:`Bearer ${r.value}`},query:{character_id:a.currentCharacter.id}});if(t.success){const e=t.data.find(g=>g.resource_type==="ouro");f.value=e?e.amount:0}}catch{}},T=async r=>{if(a.currentCharacter){u.value=!0;try{const t=m("@mmo/ninja/token"),e=await $fetch("/api/shop/buy",{method:"POST",headers:{Authorization:`Bearer ${t.value}`},body:{character_id:a.currentCharacter.id,item_id:r.id}});e.success&&(f.value=e.data.remaining_gold,alert(`${r.name} comprado com sucesso!`),await v())}catch(t){alert(t.data?.message||"Erro ao comprar item")}finally{u.value=!1}}};return F(async()=>{a.currentCharacter||(await a.loadCharacters(),a.characters.length>0&&a.selectCharacter(a.characters[0])),await q(),await v()}),(r,t)=>(n(),l("div",L,[t[10]||(t[10]=s("div",{class:"text-center"},[s("h1",{class:"text-2xl md:text-4xl font-bold text-gray-900 dark:text-white mb-2"}," Loja "),s("p",{class:"text-gray-600 dark:text-gray-400 text-sm md:text-base"}," Compre itens e equipamentos para fortalecer seu personagem ")],-1)),c(a).currentCharacter?(n(),l("div",O,[s("div",M,[s("div",null,[s("h2",P,o(c(a).currentCharacter.name),1),s("p",R," Nível "+o(c(a).currentCharacter.level),1)]),s("div",H,[t[0]||(t[0]=s("span",{class:"text-yellow-500"},"💰",-1)),s("span",J,o(f.value),1)])])])):d("",!0),u.value?(n(),l("div",K,[...t[1]||(t[1]=[s("div",{class:"text-lg text-gray-600 dark:text-gray-400"}," Carregando itens da loja... ",-1)])])):y.value.length>0?(n(),l("div",Q,[s("div",U,[(n(!0),l(w,null,C(N.value,e=>(n(),$(c(k),{key:e,onClick:g=>p.value=e,variant:p.value===e?"default":"outline",size:"sm",class:j(p.value===e?"bg-blue-600 text-white border-blue-600 ring-2 ring-blue-500":"text-gray-900 dark:text-white border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-800")},{default:i(()=>[_(o(e),1)]),_:2},1032,["onClick","variant","class"]))),128))]),s("div",W,[(n(!0),l(w,null,C(B.value,e=>(n(),$(c(V),{key:e.id,class:j(["hover:shadow-lg transition-all duration-200",e.can_buy?"":"opacity-60"])},{default:i(()=>[x(c(z),null,{default:i(()=>[s("div",X,[x(c(E),{class:"text-lg text-gray-900 dark:text-white"},{default:i(()=>[_(o(e.name),1)]),_:2},1024),x(c(S),{variant:e.type==="potion"?"default":"secondary"},{default:i(()=>[_(o(e.type==="potion"?"🧪":"⚔️"),1)]),_:2},1032,["variant"])]),x(c(A),{class:"text-gray-700 dark:text-white"},{default:i(()=>[_(o(e.description),1)]),_:2},1024)]),_:2},1024),x(c(I),{class:"space-y-4"},{default:i(()=>[e.type==="equipment"&&e.stats?(n(),l("div",Y,[t[7]||(t[7]=s("h4",{class:"text-sm font-medium text-black dark:text-white"}," Bônus: ",-1)),s("div",Z,[e.stats.strength?(n(),l("div",ee,[t[2]||(t[2]=s("span",{class:"text-gray-600 dark:text-gray-400"},"Força:",-1)),s("span",te,"+"+o(e.stats.strength),1)])):d("",!0),e.stats.agility?(n(),l("div",se,[t[3]||(t[3]=s("span",{class:"text-gray-600 dark:text-gray-400"},"Agilidade:",-1)),s("span",ae,"+"+o(e.stats.agility),1)])):d("",!0),e.stats.defense?(n(),l("div",re,[t[4]||(t[4]=s("span",{class:"text-gray-600 dark:text-gray-400"},"Defesa:",-1)),s("span",oe,"+"+o(e.stats.defense),1)])):d("",!0),e.stats.health?(n(),l("div",ne,[t[5]||(t[5]=s("span",{class:"text-gray-600 dark:text-gray-400"},"Vida:",-1)),s("span",le,"+"+o(e.stats.health),1)])):d("",!0),e.stats.damage?(n(),l("div",ce,[t[6]||(t[6]=s("span",{class:"text-gray-600 dark:text-gray-400"},"Dano:",-1)),s("span",ie,"+"+o(e.stats.damage),1)])):d("",!0)])])):d("",!0),s("div",de,[s("div",ue,[t[8]||(t[8]=s("span",{class:"text-yellow-500"},"💰",-1)),s("span",fe,o(e.price),1)]),s("div",xe," Nv. "+o(e.level_required),1)]),x(c(k),{onClick:g=>T(e),disabled:u.value||!e.can_buy||e.price>f.value,class:"w-full",variant:e.can_buy?e.price>f.value?"destructive":"default":"secondary"},{default:i(()=>[_(o(e.can_buy?e.price>f.value?"Ouro Insuficiente":"Comprar":`Nível ${e.level_required} Necessário`),1)]),_:2},1032,["onClick","disabled","variant"])]),_:2},1024)]),_:2},1032,["class"]))),128))])])):(n(),l("div",ye,[...t[9]||(t[9]=[s("div",{class:"text-6xl mb-4"},"🏪",-1),s("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-2"}," Nenhum item disponível ",-1),s("p",{class:"text-gray-600 dark:text-gray-400"}," Suba de nível para desbloquear mais itens na loja! ",-1)])]))]))}});export{we as default};
